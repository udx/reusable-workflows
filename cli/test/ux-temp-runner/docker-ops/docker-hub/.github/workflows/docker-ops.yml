name: Docker Release
"on":
  push:
    branches:
      - main
  workflow_dispatch: null
permissions:
  contents: write
  id-token: write
jobs:
  release:
    uses: udx/reusable-workflows/.github/workflows/docker-ops.yml@master
    with:
      image_name: ${{ vars.IMAGE_NAME }}
      docker_login: ${{ vars.DOCKER_USERNAME }}
      docker_org: ${{ vars.DOCKER_ORG }}
      docker_repo: ${{ vars.DOCKER_REPO }}
      release_branch: latest
      dockerfile_path: ./Dockerfile
      build_platforms: linux/amd64,linux/arm64
      version_config_path: ci/git-version.yml
      build_args: ""
      enable_security_scan: "true"
      enable_security_upload: "true"
      enable_sbom: "true"
    secrets:
      docker_token: ${{ secrets.DOCKER_TOKEN }}
